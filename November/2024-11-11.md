## π“† 2024-11-11

### π”” ν•™μµ λ©ν‘

- Express REST κ΄€λ ¨ κ°λ… μ •λ¦¬

### π€ Today I Learned

#### μ£Όμ  1: Express REST κ΄€λ ¨ κ°λ… μ •λ¦¬

```javascript
const express = require("express");

const app = express();
const port = 3000;

app.use(express.json());

// μ‚¬μ©μ κ΄€λ¦¬ API

// 10λ…μ μ‚¬μ©μ μ •λ³΄λ¥Ό λ‹΄κ³  μλ” JSON λ°μ΄ν„°
const users = [
  {
    id: 1,
    name: "Alice Kim",
    age: 25,
    email: "alice.kim@example.com",
    address: "123 Maple St, Seoul",
    phone: "010-1234-5678",
  },
  {
    id: 2,
    name: "Bob Lee",
    age: 30,
    email: "bob.lee@example.com",
    address: "456 Oak St, Busan",
    phone: "010-8765-4321",
  },
  {
    id: 3,
    name: "Charlie Park",
    age: 28,
    email: "charlie.park@example.com",
    address: "789 Pine St, Incheon",
    phone: "010-2345-6789",
  },
  {
    id: 4,
    name: "David Choi",
    age: 32,
    email: "david.choi@example.com",
    address: "101 Elm St, Daegu",
    phone: "010-3456-7890",
  },
  {
    id: 5,
    name: "Ella Jung",
    age: 29,
    email: "ella.jung@example.com",
    address: "202 Cedar St, Daejeon",
    phone: "010-4567-8901",
  },
  {
    id: 6,
    name: "Frank Moon",
    age: 35,
    email: "frank.moon@example.com",
    address: "303 Birch St, Gwangju",
    phone: "010-5678-9012",
  },
  {
    id: 7,
    name: "Grace Han",
    age: 27,
    email: "grace.han@example.com",
    address: "404 Walnut St, Suwon",
    phone: "010-6789-0123",
  },
  {
    id: 8,
    name: "Henry Kim",
    age: 26,
    email: "henry.kim@example.com",
    address: "505 Spruce St, Ulsan",
    phone: "010-7890-1234",
  },
  {
    id: 9,
    name: "Irene Shin",
    age: 24,
    email: "irene.shin@example.com",
    address: "606 Maple St, Gyeongju",
    phone: "010-8901-2345",
  },
  {
    id: 10,
    name: "Jack Yoon",
    age: 31,
    email: "jack.yoon@example.com",
    address: "707 Oak St, Chuncheon",
    phone: "010-9012-3456",
  },
];

// GET: μ „μ²΄ μ‚¬μ©μ μ •λ³΄ μ΅°ν
app.get("/users", (req, res) => {
  res.json(users);
});

// GET: νΉμ • μ‚¬μ©μ μ •λ³΄ μ΅°ν
app.get("/users/:id", (req, res) => {
  const userId = parseInt(req.params.id, 10);
  // find(): μ κ³µλ λ°°μ—΄μ—μ„ μ κ³µλ ν…μ¤νΈ ν•¨μλ¥Ό λ§μ΅±ν•λ” μ²« λ²μ§Έ μ”μ†λ¥Ό λ°ν™
  const user = users.find((u) => u.id === userId);

  if (user) {
    res.json(user);
  } else {
    res.status(404).json({ error: "Userλ¥Ό μ°Ύμ„ μ μ—†μ" });
  }
});

// POST: μ‚¬μ©μ μ •λ³΄ μ…λ ¥
app.post("/users", (req, res) => {
  const newUser = {
    id: users.length + 1,
    ...req.body,
  };
  users.push(newUser);
  res.status(201).json(newUser);
});

// PUT: νΉμ • μ‚¬μ©μ μ •λ³΄ μ „μ²΄ μμ •
app.put("/users/:id", (req, res) => {
  const userId = parseInt(req.params.id, 10);

  // findIndex(): μ£Όμ–΄μ§„ νλ³„ ν•¨μλ¥Ό λ§μ΅±ν•λ” λ°°μ—΄μ μ²« λ²μ§Έ μ”μ†μ— λ€ν• μΈλ±μ¤λ¥Ό λ°ν™
  const userIndex = users.findIndex((u) => u.id === userId);

  if (userIndex !== -1) {
    users[userIndex] = { id: userId, ...req.body }; // μ „μ²΄ μμ •, idλ” μ μ§€
    res.json(users[userIndex]);
  } else {
    res.status(404).json({ error: "userλ¥Ό μ°Ύμ„ μ μ—†μ" });
  }
});

// PATCH: νΉμ • μ‚¬μ©μ μ •λ³΄ μΌλ¶€ μμ •
app.patch("/users/:id", (req, res) => {
  const userId = parseInt(req.params.id, 10);
  const user = users.find((u) => u.id === userId);

  if (user) {
    // Object.assign λ©”μ„λ“λ” target, source κ°μ²΄ μΈμλ¥Ό λ°›μ•„μ„ targetμ— sourceλ¥Ό λ®μ–΄μ“°κΈ°ν•λ‹¤.
    Object.assign(user, req.body);
    res.json(user);
  } else {
    res.status(404).json({ error: "userλ¥Ό μ°Ύμ„ μ μ—†μ" });
  }
});

// DELETE: νΉμ • μ‚¬μ©μ μ •λ³΄ μ‚­μ 
app.delete("/users/:id", (req, res) => {
  const userId = parseInt(req.params.id, 10);
  const userIndex = users.findIndex((u) => u.id === userId);

  if (userIndex !== -1) {
    // spliceλ” μ²«λ²μ§Έ μΈμμ— μ‚­μ ν•  μ”μ†μ μΈλ±μ¤, λ‘λ²μ§Έ μΈμμ— λ‡κ°μ μ”μ†λ¥Ό μ‚­μ ν• μ§€ μ§€μ •ν•κ³  μ”μ†λ¥Ό μ‚­μ ν•λ” λ©”μ„λ“μ΄λ‹¤.
    const deletedUser = users.splice(userIndex, 1);
    res.json(deletedUser[0]);
  } else {
    res.status(404).json({ error: "userλ¥Ό μ°Ύμ„ μ μ—†μ" });
  }
});

app.listen(port, () => {
  console.log(`Server is running on http://localhost:${port}`);
});
```

- REST: μμ›μ„ μ΄λ¦„μΌλ΅ μ‹λ³„ν•κ³  ν•΄λ‹Ή μμ›μ μƒνƒλ¥Ό κµ¬μ΅°ν™”λ ν•μ‹μΌλ΅ ν‘ν„ν•μ—¬ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ μ •λ³΄λ¥Ό κµν™ν•λ” λ°©μ‹
- API: μ„λ΅ λ‹¤λ¥Έ μ†ν”„νΈμ›¨μ–΄ κ°„ μ •λ³΄λ¥Ό κµν™ν•  μ μλ” κ·μΉ™
- REST μ•„ν‚¤ν…μ²
  1. Uniform Interface: api urlμ€ λ‹¨μμ„±κ³Ό μƒνΈ μ΄μ©μ„±μ„ λ³΄μ¥ν•΄ν•λ„λ΅ λ…λ…ν•΄μ•Όν•λ‹¤.
  2. Client-Server: ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ…λ¦½μ μΌλ΅ κµ¬λ¶„λμ•Ό ν•λ‹¤.
  3. Stateless: μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μƒνƒ μ •λ³΄λ¥Ό μ €μ¥ν•μ§€ μ•μ•„μ•Ό ν•λ‹¤. κ°κ°μ μ”μ²­μ΄ λ…λ¦½μ μ΄λ©° ν•„μ”ν• λ¨λ“  μ •λ³΄λ¥Ό ν¬ν•¨ν•΄μ•Ό ν•λ‹¤.
  4. Cacheable: μ‘λ‹µμ€ μΊμ‹±μ΄ κ°€λ¥ν•λ„λ΅ λ…μ‹ λμ–΄μ•Ό ν•λ‹¤.
  5. Layered System: ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ λ‹¨μΌ μ„λ²„μΈμ§€ λ‹¤μ¤‘ κ³„μΈµμ„ ν†µν•΄ λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•λ” μ¤‘κ³„μ„λ²„λ¥Ό κ±°μΉλ” μ§€ μ• μ μ—†μ–΄μ•Ό ν•λ‹¤.
  6. Self-Descripiveness: λ©”μ„Έμ§€ μμ²΄κ°€ μ¶©λ¶„ν• μ •λ³΄λ¥Ό λ‹΄κ³  μμ–΄, ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ–»κ² μ²λ¦¬ν•΄μ•Ό ν•  μ§€λ¥Ό μ• μ μμ–΄μ•Ό ν•λ‹¤.
- REST API: REST μ•„ν‚¤ν…μ² μ¤νƒ€μΌμ„ λ”°λ¥΄λ” API, μ΄ APIλ¥Ό μ κ³µν•λ” μ›Ή μ„λΉ„μ¤λ¥Ό "RESTful ν•λ‹¤" λΌκ³  ν•λ‹¤.

### HTTP λ©”μ„λ“

- GET: μ„λ²„λ΅λ¶€ν„° λ°μ΄ν„° μ΅°νλ¥Ό μ”μ²­ν•  λ• μ‚¬μ©ν•λ” λ©”μ„λ“
- POST: μ„λ²„λ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•μ—¬ λ¦¬μ†μ¤λ¥Ό μƒμ„±ν•κ±°λ‚ μ—…λ°μ΄νΈν•  λ• μ‚¬μ©ν•λ” λ©”μ„λ“
- PUT: μ„λ²„λ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•μ—¬ λ¦¬μ†μ¤λ¥Ό μ „μ²΄ μ—…λ°μ΄νΈν•  λ• μ‚¬μ©ν•λ” λ©”μ„λ“
- PATCH: μ„λ²„μ λ¦¬μ†μ¤λ¥Ό λ¶€λ¶„μ μΌλ΅ μμ • λλ” μ—…λ°μ΄νΈν•  λ• μ‚¬μ©ν•λ” λ©”μ„λ“
- DELETE: μ„λ²„λ΅λ¶€ν„° λ¦¬μ†μ¤λ¥Ό μ‚­μ ν•  λ• μ‚¬μ©ν•λ” λ©”μ„λ“

### π—¨οΈ μ¤λμ νκ³ 

- NodeJSλ” μλ°”μ¤ν¬λ¦½νΈ κΈ°λ° λ°νƒ€μ„ ν™κ²½μ΄λΌ μλ°”μ¤ν¬λ¦½νΈμ—μ„ μ μ©ν•κ² μ“Έ μ μλ” λ©”μ„λ“λ“¤μ„ μµν€λ‘λ”κ² μ¤‘μ”ν•  κ²ƒ κ°™λ‹¤. νΉν Array.prototypeμ— μ΅΄μ¬ν•λ” λ©”μ„λ“λ“¤μ„ μ μ•μ•„μ•Ό λ°°μ—΄μ„ μ μ“Έ μ μλ‹¤.
- μλ°”μ¤ν¬λ¦½νΈμ μ „κ° κµ¬λ¬Έ(Spread Syntax)λ” ES6μ—μ„ μƒλ΅ μ¶”κ°€λ λ¬Έλ²•μΌλ΅, κ°μ²΄λ‚ λ°°μ—΄λ“¤μ„ νΌμΉ  μ μκ² ν•΄ μ¤€λ‹¤.<br/> νΌμΉ  λ€μƒμ΄ λ°°μ—΄μΈ κ²½μ° μƒλ΅μ΄ λ°°μ—΄λ΅ λ³µμ‚¬ν•κ±°λ‚, μ—¬λ¬κ°μ λ°°μ—΄μ„ ν•©μΉ  λ• μ‚¬μ©ν•  μ μκ³ , <br/>
  νΌμΉ  λ€μƒμ΄ κ°μ²΄μΈ κ²½μ°μ—λ„ μƒλ΅μ΄ κ°μ²΄λ¥Ό λ³µμ‚¬ν•κ±°λ‚, JSON κ°μ²΄μ— μƒλ΅μ΄ κ°’μ„ μ¶”κ°€ν•μ—¬ μƒλ΅μ΄ κ°μ²΄λ¥Ό μƒμ„±ν•  μ μλ‹¤.

```javascript
const myObject1 = {
  laptop: "MacBook Pro",
  tablet: "iPad Pro 11",
};

const myObject2 = {
  ...myObject1,
  phone: "Galaxy Note 10",
};

console.log(myObject1); // {laptop: "MacBook Pro", tablet: "iPad Pro 11"}
console.log(myObject2); // {laptop: "MacBook Pro", tablet: "iPad Pro 11", phone: "Galaxy Note 10"}
```
