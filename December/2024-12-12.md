## 📆 2024-12-12

### 🔔 학습 목표

- Docker 딥 다이브 한줄 정리

### 🚀 Today I Learned

# Docker의 개념 및 아키텍처

## 1. Docker란 무엇인가

Docker는 애플리케이션을 컨테이너라는 표준화된 단위로 패키징하고 배포할 수 있는 플랫폼입니다.  
컨테이너는 코드, 런타임, 시스템 도구 및 라이브러리를 포함해 애플리케이션이 실행되는 환경을 격리하여 제공합니다. Docker를 통해 개발 환경과 운영 환경의 일관성을 유지하며, 경량화된 배포를 가능하게 합니다.

### 서버 내부 상호작용

- Docker는 호스트 운영체제 상에서 `Docker Daemon`을 실행하며, 컨테이너와 이미지를 관리합니다.
- 개발자가 명령어를 실행하면 Docker Client가 Docker Daemon과 통신하여 명령을 전달합니다.
- Docker Daemon은 호스트의 리소스를 활용해 컨테이너를 생성, 삭제, 실행합니다.

### 외부 세계 상호작용

- Docker Registry(예: Docker Hub)에서 이미지를 가져오거나, 생성한 이미지를 업로드하여 다른 환경에서도 사용할 수 있습니다.
- 컨테이너는 네트워크 포트를 통해 외부 서비스와 통신하거나 요청을 처리합니다.

---

## 2. 컨테이너와 이미지의 차이점

### 차이점

- **이미지**: 애플리케이션의 실행 환경과 파일 시스템을 캡처한 불변의 스냅샷. 읽기 전용이며, 실행 가능한 상태로 저장.
- **컨테이너**: 이미지를 기반으로 생성된 실행 가능한 인스턴스. 읽기-쓰기 계층이 추가되며, 애플리케이션이 실행 중인 상태를 포함.

### 서버 내부 상호작용

- Docker Daemon은 이미지를 기반으로 컨테이너를 생성하며, 생성된 컨테이너는 이미지의 읽기 전용 계층 위에 실행 계층을 추가합니다.
- 컨테이너 내부의 변경 사항은 실행 계층에 저장되며, 이미지를 수정하지 않습니다.

### 외부 세계 상호작용

- 이미지는 Registry에 업로드되어 다른 시스템에서 공유됩니다.
- 컨테이너는 네트워크를 통해 API 요청을 처리하거나 다른 컨테이너, 서비스와 상호작용합니다.

---

## 3. Docker Client, Docker Daemon, Registry 구조 이해

- **Docker Client**: 사용자가 명령어를 입력하는 CLI 도구 또는 API 클라이언트. `docker run`, `docker build` 등의 명령어를 통해 Daemon과 통신.
- **Docker Daemon**: Docker의 백그라운드 프로세스. 컨테이너 실행, 이미지 빌드, 네트워크 설정 등을 처리.
- **Registry**: Docker 이미지 저장소. 기본적으로 Docker Hub를 사용하지만, 개인 Registry를 설정할 수도 있음.

### 서버 내부 상호작용

- Client는 명령을 입력하면 Daemon과 REST API를 통해 통신합니다.
- Daemon은 이미지를 Registry에서 가져오거나, 호스트에서 빌드된 이미지를 Registry에 푸시합니다.
- Daemon은 컨테이너 실행 요청 시, 이미지를 사용하여 컨테이너를 생성합니다.

### 외부 세계 상호작용

- Client는 명령을 통해 Registry에서 이미지를 pull하거나 push합니다.
- 컨테이너는 외부 네트워크와 통신하거나 외부 요청을 처리하며, 필요 시 Registry와의 통신을 통해 업데이트된 이미지를 가져옵니다.

---

## 4. VM과 Docker 컨테이너의 차이점

### 차이점

| **항목**            | **VM**                 | **Docker 컨테이너**                     |
| ------------------- | ---------------------- | --------------------------------------- |
| **격리 방식**       | 하드웨어 가상화        | 프로세스 레벨 격리                      |
| **시작 속도**       | 느림 (몇 분)           | 빠름 (몇 초)                            |
| **리소스 사용량**   | 무겁고 고정된 리소스   | 경량화, 유동적인 리소스 사용            |
| **운영체제 필요성** | 각 VM에 게스트 OS 필요 | 호스트 OS를 공유, 독립된 실행 환경 제공 |
| **유연성**          | 이식성이 낮음          | 이식성이 높음                           |

### 서버 내부 상호작용

- VM은 하이퍼바이저를 통해 게스트 OS를 실행하며, 각 VM은 별도의 커널과 운영체제를 가집니다.
- Docker 컨테이너는 호스트 OS의 커널을 공유하며, 독립된 네임스페이스를 통해 격리됩니다.

### 외부 세계 상호작용

- VM은 네트워크 브리징을 통해 외부 서비스와 통신합니다.
- Docker 컨테이너는 호스트의 네트워크 인터페이스를 통해 외부와 연결되며, 포트 매핑을 통해 외부 요청을 처리합니다.
